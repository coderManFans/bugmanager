<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD iBatis Mapper 3.0 //EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.bugmanger.bugcontent.dao.BugContentDao">
    <insert id="addBugContentWithAnswer">
        insert into t_bugcontent (bug_reason,console_error,bug_code,bug_typeid,bug_solutionid)
         VALUES (#{bugContent.bugReason},#{bugContent.consoleError},#{bugContent.bugCode},#{bugContent.bugTypeId},#{bugContent.bugSolutionId})
    </insert>

    <insert id="addBugContentNoAnswer">
        insert into t_bugcontent (bug_reason,console_error,bug_code,bug_typeid)
         VALUES (#{bugContent.bugReason},#{bugContent.consoleError},#{bugContent.bugCode},#{bugContent.bugTypeId})
    </insert>


    <select id="getBugContentSize" resultType="int">
        select count(*) from t_bugcontent
    </select>
    <update id="updateBugContent">
        update t_bugcontent set bug_reason=#{bugContent.bugReason},console_error = #{bugContent.consoleError},
        bug_code=#{bugContent.bugCode},bug_typeid=#{bugContent.bugTypeId},bug_solutionid=#{bugContent.bugSolutionId}
        where bug_contentid = #{bugContent.bugContentId}
    </update>
    <select id="getBugContentList" resultType="cn.com.bugmanger.bugcontent.model.BugContent">
          SELECT  * FROM  t_bugcontent
    </select>
    <delete id="deleteBugContentById" >
          DELETE  from t_bugcontent where bug_contentid=#{bugContentId}
    </delete>
    <select id="getBugContentById"  resultType="cn.com.bugmanger.bugcontent.model.BugContent">
          select * from t_bugcontent where bug_contentid=#{bugContentId}
    </select>
    <select id="getBugContentListPage" resultType="cn.com.bugmanger.bugcontent.model.BugContent">
          select * from t_bugcontent where 1=1
          <if test="bugContent.bugReason != null and bugContent.bugReason != ''">
              AND  bug_reason LIKE  concat('%',#{bugContent.bugReason},'%'),
          </if>
          <if test="bugContent.consoleError != null and bugContent.consoleError != ''">
              AND console_error LIKE concat('%',#{bugContent.consoleError},'%'),
          </if>
          <if test="bugContent.bugCode != null and bugContent.bugCode != ''">
              AND bug_code LIKE concat('%',#{bugContent.bugCode},'%')
        </if>
    </select>
</mapper>